<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>FYNX Finance World - Dashboard</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg:#ffffff;
      --surface:#ffffff;
      --surface-2:#f6f7f9;
      --text:#0b0f17;
      --muted:#6b7280;
      --line:#e5e7eb;

      --shadow:0 16px 42px rgba(11,37,84,0.08);
      --shadow-2:0 10px 30px rgba(15,23,42,0.08);
      --radius:14px;

      --nav-width:120px;

      --chip:#f3f4f6;
      --chip-line:#e5e7eb;

      /* STRICT black/white only */
      --pos:#111827;
      --neg:#111827;

      --hero-dot: rgba(0,0,0,0.06);

      /* ✅ FIX #1: Buttons follow theme strictly:
         Light mode => fully white button (black text)
         Dark mode  => fully black button (white text)
      */
      --btn-bg:#ffffff;
      --btn-text:#0b0f17;
      --btn-border:#0b0f17;

      --card-bg:#fafafa;
      --card-hover:#f5f5f5;

      --ring: rgba(0,0,0,0.12);
      --glow: rgba(0,0,0,0.08);
      --alive: rgba(0,0,0,0.06);
    }

    body.dark-mode{
      --bg:#000000;
      --surface:#000000;
      --surface-2:rgba(255,255,255,0.04);
      --text:#ffffff;
      --muted:rgba(255,255,255,0.55);
      --line:rgba(255,255,255,0.10);

      --shadow:0 16px 42px rgba(0,0,0,0.45);
      --shadow-2:0 12px 34px rgba(0,0,0,0.55);

      --chip:rgba(255,255,255,0.06);
      --chip-line:rgba(255,255,255,0.10);

      --hero-dot: rgba(255,255,255,0.08);

      /* ✅ FIX #1: dark mode primary button = fully black */
      --btn-bg:#000000;
      --btn-text:#ffffff;
      --btn-border:#ffffff;

      --card-bg:rgba(255,255,255,0.03);
      --card-hover:rgba(255,255,255,0.05);

      --ring: rgba(255,255,255,0.14);
      --glow: rgba(255,255,255,0.10);
      --alive: rgba(255,255,255,0.08);
    }

    *{ margin:0; padding:0; box-sizing:border-box; }

    body{
      font-family:"Manrope", system-ui, -apple-system, Segoe UI, sans-serif;
      background:
        radial-gradient(circle at 1px 1px, var(--hero-dot) 1px, transparent 1px) 0 0 / 18px 18px,
        linear-gradient(var(--bg), var(--bg));
      color:var(--text);
      height:100vh;
      overflow:hidden;
    }

    /* Subtle grid fade */
    .bg-grid{
      position:fixed; inset:0;
      pointer-events:none;
      background:
        linear-gradient(to right, transparent 0%, transparent 45%, rgba(0,0,0,0.04) 50%, transparent 55%, transparent 100%),
        linear-gradient(to bottom, transparent 0%, transparent 45%, rgba(0,0,0,0.04) 50%, transparent 55%, transparent 100%);
      opacity:0.45;
      mix-blend-mode:normal;
    }
    body.dark-mode .bg-grid{
      background:
        linear-gradient(to right, transparent 0%, transparent 45%, rgba(255,255,255,0.06) 50%, transparent 55%, transparent 100%),
        linear-gradient(to bottom, transparent 0%, transparent 45%, rgba(255,255,255,0.06) 50%, transparent 55%, transparent 100%);
      opacity:0.35;
    }

    /* Micro-animations (clean + alive) */
    @keyframes riseIn {
      from { transform: translateY(10px); opacity: 0; }
      to   { transform: translateY(0); opacity: 1; }
    }
    @keyframes softPulse {
      0%,100% { opacity: .55; transform: translateY(0); }
      50%     { opacity: 1; transform: translateY(-1px); }
    }
    @keyframes shimmerLine {
      0% { transform: translateX(-40%); opacity: 0; }
      30% { opacity: .9; }
      100% { transform: translateX(140%); opacity: 0; }
    }
    @keyframes scan {
      0% { transform: translateX(-30%); opacity: 0; }
      30% { opacity: .95; }
      100% { transform: translateX(130%); opacity: 0; }
    }

    .dashboard-container{ display:flex; height:100vh; width:100vw; }

    /* NAV */
    .nav-panel{
      width:var(--nav-width);
      background:color-mix(in oklab, var(--surface) 92%, transparent);
      border-right:1px solid var(--line);
      position:fixed;
      left:0; top:0;
      height:100vh;
      z-index:100;
      display:flex;
      flex-direction:column;
      backdrop-filter: blur(10px);
    }

    .nav-logo{
      padding:30px 0;
      text-align:center;
      border-bottom:1px solid var(--line);
    }

    .nav-logo h1{
      font-size:18px;
      font-weight:800;
      letter-spacing:-0.6px;
      color:var(--text);
    }

    .nav-menu{
      flex:1;
      padding:18px 0;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:8px;
    }

    .nav-item{
      width:86px;
      padding:14px 0;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:8px;
      cursor:pointer;
      transition:all .18s ease;
      position:relative;
      border-radius:12px;
      color:var(--muted);
      border:1px solid transparent;
      user-select:none;
    }

    .nav-item:hover{
      background:var(--surface-2);
      color:var(--text);
      border-color:var(--line);
      transform:translateY(-1px);
    }

    .nav-item.active{
      background:var(--surface-2);
      color:var(--text);
      border-color:transparent;
      box-shadow:var(--shadow-2);
    }

    .nav-item.active::after{
      content:"";
      position:absolute;
      left:-1px;
      top:50%;
      transform:translateY(-50%);
      width:3px;
      height:26px;
      background:var(--text);
      border-radius:0 3px 3px 0;
      opacity:0.9;
    }
    body.dark-mode .nav-item.active::after{ background:#ffffff; opacity:0.9; }

    .nav-icon{
      width:22px; height:22px;
      stroke:currentColor;
      stroke-width:1.7;
      fill:none;
      opacity:0.9;
    }

    .nav-label{
      font-size:11px;
      font-weight:700;
      letter-spacing:0.2px;
    }

    /* MAIN */
    .main-content{
      margin-left:var(--nav-width);
      flex:1;
      height:100vh;
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }

    /* TOP BAR */
    .top-bar{
      height:72px;
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 28px;
      background:color-mix(in oklab, var(--surface) 90%, transparent);
      backdrop-filter: blur(10px);
      position:sticky;
      top:0;
      z-index:20;
    }

    .page-title{
      font-size:14px;
      font-weight:700;
      color:var(--muted);
      letter-spacing:0.2px;
    }

    .top-bar-right{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .chip{
      border:1px solid var(--chip-line);
      background:var(--chip);
      color:var(--muted);
      border-radius:999px;
      font-size:12px;
      padding:8px 12px;
      font-weight:700;
    }

    .icon-btn{
      width:34px;
      height:34px;
      border-radius:10px;
      border:1px solid var(--line);
      background:color-mix(in oklab, var(--surface) 92%, transparent);
      display:grid;
      place-items:center;
      cursor:pointer;
      color:var(--muted);
      transition:0.18s ease;
    }
    .icon-btn:hover{
      color:var(--text);
      border-color:color-mix(in oklab, var(--text) 28%, var(--line));
      transform:translateY(-1px);
    }
    .icon-btn svg{ width:18px; height:18px; stroke:currentColor; stroke-width:1.7; fill:none; }

    .user-avatar{
      width:34px; height:34px;
      border-radius:999px;
      background:var(--surface-2);
      border:1px solid var(--line);
      display:grid;
      place-items:center;
      font-size:12px;
      font-weight:800;
      color:var(--muted);
      transition:0.18s ease;
      cursor:pointer;
    }
    .user-avatar:hover{
      transform:translateY(-1px);
      border-color:color-mix(in oklab, var(--text) 28%, var(--line));
      color:var(--text);
    }

    /* CONTENT */
    .content-area{
      flex:1;
      overflow-y:auto;
      padding:24px 28px 28px;
    }

    .content-area::-webkit-scrollbar{ width:6px; }
    .content-area::-webkit-scrollbar-track{ background:transparent; }
    .content-area::-webkit-scrollbar-thumb{ background:color-mix(in oklab, var(--muted) 22%, transparent); border-radius:6px; }
    .content-area::-webkit-scrollbar-thumb:hover{ background:color-mix(in oklab, var(--muted) 35%, transparent); }

    /* HERO */
    .hero{
      border:1px solid var(--line);
      border-radius:18px;
      background:color-mix(in oklab, var(--surface) 92%, transparent);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
      margin-bottom:16px;
      animation: riseIn .38s ease both;
    }

    .hero::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(900px 320px at 18% 0%, rgba(0,0,0,0.06) 0%, transparent 60%),
        radial-gradient(700px 260px at 92% 0%, rgba(0,0,0,0.05) 0%, transparent 60%);
      pointer-events:none;
    }
    body.dark-mode .hero::before{
      background:
        radial-gradient(900px 320px at 18% 0%, rgba(255,255,255,0.08) 0%, transparent 60%),
        radial-gradient(700px 260px at 92% 0%, rgba(255,255,255,0.06) 0%, transparent 60%);
    }

    .hero::after{
      content:"";
      position:absolute;
      top:0; left:-40%;
      width:40%;
      height:100%;
      background: linear-gradient(90deg, transparent, color-mix(in oklab, var(--text) 10%, transparent), transparent);
      opacity:.14;
      pointer-events:none;
      animation: shimmerLine 6.5s ease-in-out infinite;
    }
    body.dark-mode .hero::after{
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.14), transparent);
      opacity:.12;
    }

    .hero-inner{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:16px;
      padding:18px 18px 16px;
      position:relative;
      z-index:1;
    }

    /* Greeting block */
    .greeting{
      display:grid;
      gap:6px;
      margin-bottom:10px;
    }
    .greeting .hello{
      font-size:20px;
      font-weight:900;
      letter-spacing:-0.4px;
      color:var(--text);
      line-height:1.15;
    }
    .greeting .meta{
      font-size:12px;
      font-weight:800;
      color:var(--muted);
      letter-spacing:0.2px;
    }
    .greeting .daily{
      margin-top:6px;
      padding:10px 12px;
      border:1px solid var(--line);
      border-radius:14px;
      background: color-mix(in oklab, var(--surface) 88%, transparent);
      box-shadow: 0 1px 0 color-mix(in oklab, var(--text) 8%, transparent);
      font-size:13px;
      line-height:1.45;
      color: var(--text);
      font-weight:800;
      animation: riseIn .45s ease both;
    }
    .greeting .daily span{
      color: var(--muted);
      font-weight:900;
      margin-right:6px;
      letter-spacing:0.2px;
    }

    /* Primary button (kept in code but not used on Home now) */
    .btn{
      border-radius:999px;
      padding:10px 14px;
      font-size:13px;
      font-weight:900;
      cursor:pointer;
      transition:0.18s ease;
      border:1px solid var(--line);
      background:var(--surface);
      color:var(--text);
    }
    .btn:hover{
      transform:translateY(-1px);
      border-color:color-mix(in oklab, var(--text) 22%, var(--line));
    }
    .btn.primary{
      background:var(--btn-bg);
      color:var(--btn-text);
      border-color:var(--btn-border);
    }
    .btn.primary:hover{ opacity:0.92; }

    /* ✅ Market Hours (more alive like example) */
    .market-hours{
      width:100%;
      border:1px solid var(--line);
      background:var(--surface);
      border-radius:16px;
      padding:12px;
      display:grid;
      gap:12px;
      position:relative;
      overflow:hidden;
      margin-top:10px;
    }

    /* Alive background + scan */
    .market-hours::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(520px 180px at 12% 0%, var(--glow) 0%, transparent 62%),
        radial-gradient(520px 180px at 92% 0%, var(--glow) 0%, transparent 62%),
        linear-gradient(180deg, transparent, var(--alive), transparent);
      opacity:1;
      pointer-events:none;
    }
    .market-hours::after{
      content:"";
      position:absolute;
      top:0; left:-30%;
      width:30%;
      height:100%;
      background: linear-gradient(90deg, transparent, color-mix(in oklab, var(--text) 12%, transparent), transparent);
      opacity:.12;
      pointer-events:none;
      animation: scan 4.8s ease-in-out infinite;
    }
    body.dark-mode .market-hours::after{
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.16), transparent);
      opacity:.12;
    }

    .mh-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      position:relative;
      z-index:1;
    }
    .mh-title{
      font-size:12px;
      font-weight:900;
      letter-spacing:0.9px;
      text-transform:uppercase;
      color:var(--muted);
    }
    .mh-updated{
      font-size:12px;
      font-weight:900;
      color:var(--muted);
    }

    .mh-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      position:relative;
      z-index:1;
    }

    .mh-card{
      border:1px solid var(--line);
      border-radius:14px;
      background:color-mix(in oklab, var(--surface-2) 94%, transparent);
      padding:10px;
      display:grid;
      gap:8px;
      min-height:92px;
      transition:0.18s ease;
      position:relative;
      overflow:hidden;
    }
    .mh-card:hover{
      transform:translateY(-1px);
      border-color:color-mix(in oklab, var(--text) 18%, var(--line));
      background:color-mix(in oklab, var(--surface-2) 90%, transparent);
    }

    /* Animated inner glow on open */
    .mh-card.open::before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(260px 110px at 20% 0%, color-mix(in oklab, var(--text) 10%, transparent), transparent 60%),
        radial-gradient(260px 110px at 80% 0%, color-mix(in oklab, var(--text) 10%, transparent), transparent 60%);
      opacity:.55;
      pointer-events:none;
    }
    body.dark-mode .mh-card.open::before{
      background:
        radial-gradient(260px 110px at 20% 0%, rgba(255,255,255,0.12), transparent 60%),
        radial-gradient(260px 110px at 80% 0%, rgba(255,255,255,0.10), transparent 60%);
      opacity:.55;
    }

    .mh-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      position:relative;
      z-index:1;
    }

    .mh-name{
      font-size:11px;
      font-weight:1000;
      letter-spacing:0.9px;
      text-transform:uppercase;
      color:var(--text);
      opacity:0.95;
    }

    .mh-badge{
      font-size:10px;
      font-weight:1000;
      letter-spacing:0.8px;
      text-transform:uppercase;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: color-mix(in oklab, var(--surface) 86%, transparent);
      color: var(--muted);
      white-space:nowrap;
    }
    .mh-badge.open{
      color: var(--text);
      border-color: color-mix(in oklab, var(--text) 26%, var(--line));
      background: color-mix(in oklab, var(--surface) 92%, transparent);
    }
    body.dark-mode .mh-badge.open{
      border-color: rgba(255,255,255,0.28);
      background: rgba(255,255,255,0.06);
      color:#ffffff;
    }

    .mh-time{
      font-size:12px;
      font-weight:900;
      color:var(--muted);
      line-height:1.3;
      position:relative;
      z-index:1;
    }

    /* Open dot */
    .mh-dotrow{
      display:flex;
      align-items:center;
      gap:8px;
      position:relative;
      z-index:1;
    }
    .dot{
      width:8px; height:8px;
      border-radius:999px;
      background: var(--text);
      opacity:0.22;
    }
    .dot.open{
      opacity:0.95;
      animation: softPulse 2.2s ease-in-out infinite;
    }

    /* Progress bar */
    .mh-bar{
      height:8px;
      border-radius:999px;
      border:1px solid var(--line);
      background: color-mix(in oklab, var(--surface) 88%, transparent);
      overflow:hidden;
      position:relative;
      z-index:1;
    }
    .mh-fill{
      height:100%;
      width:0%;
      background: var(--text);
      opacity:0.22;
      transition: width .35s ease;
    }
    body.dark-mode .mh-fill{
      background:#ffffff;
      opacity:0.18;
    }

    /* Existing pulse (unchanged style) */
    .mini-pulse{
      width:100%;
      border:1px solid var(--line);
      background:var(--surface);
      border-radius:14px;
      padding:12px;
      display:grid;
      gap:8px;
      margin-top:12px;
    }

    .pulse-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      font-size:12px;
      color:var(--muted);
      font-weight:800;
      letter-spacing:0.2px;
    }

    .pulse-values{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-top:2px;
    }

    .pulse-card{
      border:1px solid var(--line);
      border-radius:12px;
      background:var(--surface-2);
      padding:10px;
      display:grid;
      gap:6px;
    }

    .pulse-card .k{
      font-size:11px;
      color:var(--muted);
      font-weight:900;
      letter-spacing:0.6px;
      text-transform:uppercase;
    }

    .pulse-card .v{
      font-size:16px;
      font-weight:900;
      color:var(--text);
      letter-spacing:-0.3px;
    }

    .pulse-card .c{
      font-size:12px;
      font-weight:900;
      color: var(--muted);
    }

    /* GRID CARDS */
    .card-grid{
      display:grid;
      grid-template-columns:repeat(3, minmax(0, 1fr));
      gap:16px;
      margin-bottom:16px;
    }

    .dashboard-card{
      background:var(--card-bg);
      border:1px solid var(--line);
      border-radius:16px;
      padding:18px;
      transition:0.18s ease;
      box-shadow:var(--shadow-2);
      position:relative;
      overflow:hidden;
      animation: riseIn .42s ease both;
    }

    .dashboard-card:hover{
      background:var(--card-hover);
      border-color:color-mix(in oklab, var(--text) 14%, var(--line));
      transform:translateY(-2px);
    }

    .card-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:12px;
    }

    .card-title{
      font-size:11px;
      font-weight:900;
      letter-spacing:0.9px;
      text-transform:uppercase;
      color:var(--muted);
    }

    .card-icon{
      width:16px; height:16px;
      stroke:color-mix(in oklab, var(--muted) 70%, transparent);
      stroke-width:1.7;
      fill:none;
    }

    .card-value{
      font-size:30px;
      font-weight:900;
      letter-spacing:-1px;
      margin-bottom:6px;
      color:var(--text);
    }

    .card-subtitle{
      font-size:13px;
      color:var(--muted);
      font-weight:700;
    }

    .card-meta{
      display:flex;
      gap:16px;
      margin-top:14px;
      padding-top:14px;
      border-top:1px solid var(--line);
    }

    .card-meta-item{ display:flex; flex-direction:column; gap:4px; }
    .card-meta-label{ font-size:11px; color:var(--muted); font-weight:800; }
    .card-meta-value{ font-size:13px; font-weight:900; color:var(--text); }

    .card-large{
      grid-column:span 3;
      padding:18px;
    }

    .card-section-title{
      font-size:11px;
      font-weight:900;
      letter-spacing:0.9px;
      text-transform:uppercase;
      color:var(--muted);
    }

    .tab-bar{
      display:flex;
      gap:8px;
      margin:12px 0 14px;
    }

    .tab-button{
      padding:7px 12px;
      border:1px solid var(--line);
      border-radius:999px;
      background:var(--surface);
      font-size:12px;
      font-weight:900;
      color:var(--muted);
      cursor:pointer;
      transition:0.18s ease;
    }

    .tab-button.active{
      background:var(--btn-bg);
      border-color:var(--btn-border);
      color:var(--btn-text);
    }

    .tab-button:hover:not(.active){
      transform:translateY(-1px);
      color:var(--text);
      border-color:color-mix(in oklab, var(--text) 18%, var(--line));
    }

    .chart-box{
      height:220px;
      border:1px solid var(--line);
      background:var(--surface-2);
      border-radius:14px;
      display:grid;
      place-items:center;
      color:var(--muted);
      font-weight:900;
      letter-spacing:0.2px;
    }

    /* Mobile */
    @media (max-width: 980px){
      .hero-inner{ flex-direction:column; align-items:flex-start; }
      .mh-grid{ grid-template-columns:1fr 1fr; }
      .pulse-values{ grid-template-columns:1fr 1fr; }
      .card-grid{ grid-template-columns:1fr; }
      .card-large{ grid-column:span 1; }
      .content-area{ padding:16px; }
      .top-bar{ padding:0 16px; }
    }

    @media (max-width: 720px){
      .nav-panel{
        width:100%;
        height:74px;
        bottom:0;
        top:auto;
        left:0;
        right:0;
        border-right:none;
        border-top:1px solid var(--line);
        flex-direction:row;
        align-items:center;
        justify-content:center;
        padding-bottom: env(safe-area-inset-bottom);
      }
      .nav-logo{ display:none; }
      .nav-menu{
        flex-direction:row;
        width:100%;
        justify-content:space-around;
        padding:8px 10px;
        gap:8px;
      }
      .nav-item{ width:auto; min-width:56px; padding:10px 10px; }
      .nav-item.active::after{ display:none; }

      .main-content{
        margin-left:0;
        width:100%;
        padding-bottom: calc(88px + env(safe-area-inset-bottom));
      }
    }
  </style>
</head>

<body>
  <div class="bg-grid"></div>

  <div class="dashboard-container">
    <!-- LEFT NAVIGATION PANEL -->
    <nav class="nav-panel">
      <div class="nav-logo"><h1>FYNX</h1></div>

      <div class="nav-menu">
        <div class="nav-item active" data-view="home">
          <svg class="nav-icon" viewBox="0 0 24 24">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          <span class="nav-label">Home</span>
        </div>

        <div class="nav-item" data-view="journal">
          <svg class="nav-icon" viewBox="0 0 24 24">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
          </svg>
          <span class="nav-label">Journal</span>
        </div>

        <div class="nav-item" data-view="calculator">
          <svg class="nav-icon" viewBox="0 0 24 24">
            <rect x="4" y="2" width="16" height="20" rx="2"></rect>
            <line x1="8" y1="6" x2="16" y2="6"></line>
            <line x1="8" y1="10" x2="16" y2="10"></line>
            <line x1="8" y1="14" x2="16" y2="14"></line>
            <line x1="8" y1="18" x2="16" y2="18"></line>
          </svg>
          <span class="nav-label">Calculator</span>
        </div>

        <div class="nav-item" data-view="news">
          <svg class="nav-icon" viewBox="0 0 24 24">
            <path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"></path>
            <line x1="12" y1="11" x2="18" y2="11"></line>
            <line x1="12" y1="7" x2="18" y2="7"></line>
          </svg>
          <span class="nav-label">News</span>
        </div>

        <div class="nav-item" data-view="calendar">
          <svg class="nav-icon" viewBox="0 0 24 24">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          <span class="nav-label">Calendar</span>
        </div>

        <div class="nav-item" data-view="profile">
          <svg class="nav-icon" viewBox="0 0 24 24">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <span class="nav-label">Profile</span>
        </div>
      </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="main-content">
      <!-- TOP BAR -->
      <div class="top-bar">
        <h1 class="page-title">Home</h1>
        <div class="top-bar-right">
          <span class="chip" id="dateChip">Loading...</span>

          <button class="icon-btn" title="Notifications" aria-label="Notifications">
            <svg viewBox="0 0 24 24">
              <path d="M18 8a6 6 0 1 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
          </button>

          <div class="user-avatar" id="avatarInitials">FX</div>
        </div>
      </div>

      <!-- CONTENT -->
      <div class="content-area">
        <section class="hero">
          <div class="hero-inner">
            <div class="hero-left">
              <!-- Greeting + daily message -->
              <div class="greeting">
                <div class="hello" id="greetingText">Good evening, Trader.</div>
                <div class="meta" id="greetingMeta">Local time —</div>
                <div class="daily" id="dailyLine"><span>Daily:</span> Loading message…</div>
              </div>

              <!-- ✅ Remove the long paragraph + remove Open Tools/Open Journal (per request) -->
              <h2 style="font-size:34px; font-weight:1000; letter-spacing:-1px; margin-top:10px;">Dashboard</h2>
            </div>

            <div class="hero-right" style="width:100%; min-width:0; align-items:stretch;">
              <!-- Market Hours (alive) -->
              <div class="market-hours" aria-label="Market Hours">
                <div class="mh-top">
                  <span class="mh-title">Market Hours</span>
                  <span class="mh-updated" id="mhUpdated">—</span>
                </div>

                <div class="mh-grid">
                  <div class="mh-card" id="cardLondon">
                    <div class="mh-head">
                      <div class="mh-name">London</div>
                      <div class="mh-badge" id="badgeLondon">—</div>
                    </div>
                    <div class="mh-dotrow"><span class="dot" id="dotLondon"></span><span class="mh-time" id="timeLondon">—</span></div>
                    <div class="mh-bar"><div class="mh-fill" id="fillLondon"></div></div>
                  </div>

                  <div class="mh-card" id="cardNewYork">
                    <div class="mh-head">
                      <div class="mh-name">New York</div>
                      <div class="mh-badge" id="badgeNewYork">—</div>
                    </div>
                    <div class="mh-dotrow"><span class="dot" id="dotNewYork"></span><span class="mh-time" id="timeNewYork">—</span></div>
                    <div class="mh-bar"><div class="mh-fill" id="fillNewYork"></div></div>
                  </div>

                  <div class="mh-card" id="cardSydney">
                    <div class="mh-head">
                      <div class="mh-name">Sydney</div>
                      <div class="mh-badge" id="badgeSydney">—</div>
                    </div>
                    <div class="mh-dotrow"><span class="dot" id="dotSydney"></span><span class="mh-time" id="timeSydney">—</span></div>
                    <div class="mh-bar"><div class="mh-fill" id="fillSydney"></div></div>
                  </div>

                  <div class="mh-card" id="cardAsia">
                    <div class="mh-head">
                      <div class="mh-name">Asia</div>
                      <div class="mh-badge" id="badgeAsia">—</div>
                    </div>
                    <div class="mh-dotrow"><span class="dot" id="dotAsia"></span><span class="mh-time" id="timeAsia">—</span></div>
                    <div class="mh-bar"><div class="mh-fill" id="fillAsia"></div></div>
                  </div>
                </div>
              </div>

              <!-- Existing Market Pulse -->
              <div class="mini-pulse">
                <div class="pulse-row">
                  <span>Market Pulse</span>
                  <span id="pulseUpdated">—</span>
                </div>
                <div class="pulse-values">
                  <div class="pulse-card">
                    <div class="k">S&P 500</div>
                    <div class="v" id="spxVal">5,234.18</div>
                    <div class="c" id="spxChg">+0.41%</div>
                  </div>
                  <div class="pulse-card">
                    <div class="k">NASDAQ</div>
                    <div class="v" id="nasVal">16,847.22</div>
                    <div class="c" id="nasChg">+0.72%</div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </section>

        <!-- KPI CARDS -->
        <section class="card-grid">
          <div class="dashboard-card">
            <div class="card-header">
              <span class="card-title">Performance</span>
              <svg class="card-icon" viewBox="0 0 24 24">
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
              </svg>
            </div>
            <div class="card-value">+12.4%</div>
            <div class="card-subtitle">Updated 2 hours ago</div>

            <div class="card-meta">
              <div class="card-meta-item">
                <span class="card-meta-label">This Month</span>
                <span class="card-meta-value">+8.2%</span>
              </div>
              <div class="card-meta-item">
                <span class="card-meta-label">This Year</span>
                <span class="card-meta-value">+32.1%</span>
              </div>
            </div>
          </div>

          <div class="dashboard-card">
            <div class="card-header">
              <span class="card-title">Recent Activity</span>
              <svg class="card-icon" viewBox="0 0 24 24">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
              </svg>
            </div>
            <div class="card-value">24</div>
            <div class="card-subtitle">Last 7 days</div>

            <div class="card-meta">
              <div class="card-meta-item">
                <span class="card-meta-label">Trades</span>
                <span class="card-meta-value">18</span>
              </div>
              <div class="card-meta-item">
                <span class="card-meta-label">Journal Entries</span>
                <span class="card-meta-value">6</span>
              </div>
            </div>
          </div>

          <div class="dashboard-card">
            <div class="card-header">
              <span class="card-title">Market Snapshot</span>
              <svg class="card-icon" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="9"></circle>
                <path d="M12 7v5l3 3"></path>
              </svg>
            </div>
            <div class="card-value">Live</div>
            <div class="card-subtitle">Real-time view</div>

            <div class="card-meta">
              <div class="card-meta-item">
                <span class="card-meta-label">S&P 500</span>
                <span class="card-meta-value">5,234.18</span>
              </div>
              <div class="card-meta-item">
                <span class="card-meta-label">NASDAQ</span>
                <span class="card-meta-value">16,847.22</span>
              </div>
            </div>
          </div>

          <div class="dashboard-card card-large">
            <div class="card-header">
              <span class="card-section-title">Portfolio Overview</span>
              <span class="chip" id="portfolioHint">3M selected</span>
            </div>

            <div class="tab-bar">
              <button class="tab-button" data-range="1M">1M</button>
              <button class="tab-button active" data-range="3M">3M</button>
              <button class="tab-button" data-range="1Y">1Y</button>
              <button class="tab-button" data-range="ALL">ALL</button>
            </div>

            <div class="chart-box" id="chartBox">Chart Visualization</div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <script>
    // =========================
    // THEME (APPLY ONLY) — synced across pages via ONE key: fynx_theme
    // =========================
    const THEME_KEY = "fynx_theme";
    (function applyThemeFromStorage(){
      const saved = localStorage.getItem(THEME_KEY);
      if (saved === "dark") document.body.classList.add("dark-mode");
      else document.body.classList.remove("dark-mode");
    })();

    // =========================
    // NAV ROUTING
    // =========================
    const navItems = document.querySelectorAll(".nav-item");
    const viewPages = {
      home: "home.html",
      journal: "journal.html",
      calculator: "calculator.html",
      news: "news.html",
      calendar: "calendar.html",
      profile: "profile.html"
    };

    navItems.forEach(item => {
      item.addEventListener("click", () => {
        const viewName = item.getAttribute("data-view");
        if (viewPages[viewName]) window.location.href = viewPages[viewName];
      });
    });

    // =========================
    // DATE CHIP
    // =========================
    const dateChip = document.getElementById("dateChip");
    dateChip.textContent = new Date().toLocaleDateString("en-US", { weekday:"short", month:"short", day:"numeric", year:"numeric" });

    // =========================
    // Portfolio tabs (UI only)
    // =========================
    const tabs = document.querySelectorAll(".tab-button");
    const portfolioHint = document.getElementById("portfolioHint");
    const chartBox = document.getElementById("chartBox");

    tabs.forEach(btn => {
      btn.addEventListener("click", () => {
        tabs.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        const r = btn.dataset.range || "3M";
        portfolioHint.textContent = `${r} selected`;
        chartBox.textContent = `Chart Visualization (${r})`;
      });
    });

    // =========================
    // Mini pulse timestamp (placeholder)
    // =========================
    document.getElementById("pulseUpdated").textContent =
      `Updated ${new Date().toLocaleTimeString([], { hour:"2-digit", minute:"2-digit" })}`;

    // =============================================================================
    // ✅ FIX #2: PROFILE NAME always shows from username (whatever user sets)
    // We read common keys + JSON profile objects used by profile pages.
    // =============================================================================
    const NAME_KEYS = [
      "fynx_profile_name",
      "fynx_username",
      "username",
      "profile_name",
      "user_name",
      "fynx_name",
      "fynxUserName",
      "displayName",
      "name"
    ];
    const PROFILE_JSON_KEYS = ["fynx_profile", "profile", "fynx_user", "userProfile", "fynx_account"];

    function pickNameFromJson(obj){
      if (!obj || typeof obj !== "object") return null;
      const candidates = [
        obj.username, obj.userName, obj.name, obj.displayName, obj.fullName,
        obj.profile?.username, obj.profile?.name, obj.profile?.displayName
      ];
      for (const c of candidates){
        if (c && String(c).trim()) return String(c).trim();
      }
      return null;
    }

    function getProfileName(){
      // 1) direct keys
      for (const k of NAME_KEYS){
        const v = localStorage.getItem(k);
        if (v && String(v).trim().length > 0) return String(v).trim();
      }
      // 2) JSON profile blobs
      for (const k of PROFILE_JSON_KEYS){
        const raw = localStorage.getItem(k);
        if (!raw) continue;
        try{
          const obj = JSON.parse(raw);
          const n = pickNameFromJson(obj);
          if (n) return n;
        }catch(e){}
      }
      return null;
    }

    function cleanDisplayName(full){
      if (!full) return null;
      let s = String(full).trim();
      // remove trailing punctuation so we don't show "Elham.."
      s = s.replace(/[.!,;:]+$/g, "").trim();
      return s || null;
    }

    function firstName(full){
      if (!full) return null;
      const parts = String(full).trim().split(/\s+/);
      return parts[0] || full;
    }

    function getDayGreeting(h){
      if (h >= 5 && h < 12) return "Good morning";
      if (h >= 12 && h < 17) return "Good afternoon";
      if (h >= 17 && h < 21) return "Good evening";
      return "Good night";
    }

    function safeTZLabel(){
      return Intl.DateTimeFormat().resolvedOptions().timeZone || "Local";
    }

    function setAvatarFromName(name){
      const el = document.getElementById("avatarInitials");
      if (!el) return;

      const n = cleanDisplayName(name || "");
      if (!n){
        el.textContent = "FX";
        return;
      }
      const parts = n.split(/\s+/).filter(Boolean);
      let initials = parts[0]?.[0] || "F";
      if (parts.length > 1) initials += parts[parts.length-1]?.[0] || "";
      el.textContent = initials.toUpperCase();
    }

    function renderGreeting(){
      const greetEl = document.getElementById("greetingText");
      const metaEl = document.getElementById("greetingMeta");

      const rawName = getProfileName();
      const displayName = cleanDisplayName(rawName);
      const fn = cleanDisplayName(firstName(displayName)) || "Trader";

      setAvatarFromName(displayName);

      const d = new Date();
      const g = getDayGreeting(d.getHours());

      const timeStr = d.toLocaleTimeString([], { hour:"2-digit", minute:"2-digit" });
      const tz = safeTZLabel();

      greetEl.textContent = `${g}, ${fn}.`;
      metaEl.textContent = `Local time ${timeStr} — ${tz}`;
    }

    // =============================================================================
    // DAILY ROTATING MESSAGE (100 lines) — changes once per day
    // =============================================================================
    const DAILY_LINES = [
      "Your edge is discipline, not luck.",
      "Protect capital first. Opportunity comes second.",
      "A clean plan beats a loud opinion.",
      "Small mistakes compound. Fix them early.",
      "Patience is a position.",
      "Trade the plan. Not the mood.",
      "Consistency is the real flex.",
      "If it’s not clear, it’s a no.",
      "Win the process, and results follow.",
      "You don’t need more trades — you need better trades.",
      "Risk small. Think big.",
      "Momentum is earned, not gifted.",
      "Reduce noise. Increase signal.",
      "The chart rewards calm minds.",
      "One good setup can pay for a week of boredom.",
      "You are paid for waiting.",
      "Precision beats speed.",
      "A+ setups only. Everything else is distraction.",
      "Cut the impulse. Keep the structure.",
      "A stop-loss is self-respect.",
      "No revenge trades. Ever.",
      "Your rules are your freedom.",
      "Protect your sleep. Protect your decisions.",
      "Track behavior, not just P&L.",
      "You can be right and still lose — manage risk.",
      "The goal is repeatable execution.",
      "Trade less. Review more.",
      "Never confuse activity with progress.",
      "If you can’t explain it, you can’t trade it.",
      "Your best trade is often no trade.",
      "Shrink drawdowns. Grow confidence.",
      "Confidence comes from receipts: journaling.",
      "If you hesitate, size down.",
      "Structure first. Entry second.",
      "Stop hunting — start selecting.",
      "Let price come to you.",
      "Avoid chaos sessions. Trade your window.",
      "Your future self is built by today’s choices.",
      "Simplicity scales.",
      "Respect the range. Attack the breakout.",
      "Protect the downside. Upside takes care of itself.",
      "Don’t predict. React with rules.",
      "Your system is your identity.",
      "Be ruthless with weak setups.",
      "The market pays for clarity.",
      "A plan without risk is a fantasy.",
      "When unsure, do nothing.",
      "Boredom is a sign you’re doing it right.",
      "Execution > motivation.",
      "Your edge is in the boring details.",
      "Never increase risk to fix a mistake.",
      "Trust your rules — not your feelings.",
      "Focus is wealth.",
      "Don’t chase — confirm.",
      "Reduce positions when emotions rise.",
      "A clean entry starts with a clean mind.",
      "You only need one good trade per day.",
      "If it’s not in your model, it’s not for you.",
      "Protect your mental capital.",
      "One rule broken can erase ten good days.",
      "Track mistakes like you track profits.",
      "The market punishes ego.",
      "Be systematic. Be patient.",
      "Stop trying to be a hero.",
      "The goal is to survive and compound.",
      "Take what the market gives — not what you want.",
      "Price is the final truth.",
      "Setup quality beats win rate.",
      "If you can’t manage it, don’t enter it.",
      "Your watchlist is your battlefield.",
      "Speed kills precision.",
      "Let the setup breathe.",
      "Don’t trade to feel something.",
      "Trade to execute something.",
      "The less you force, the more you win.",
      "One mistake is information. Two is a pattern.",
      "Today is for execution, not experimentation.",
      "Keep the rules. Remove the drama.",
      "Be a sniper, not a machine gun.",
      "Your risk is your responsibility.",
      "A calm trader is a profitable trader.",
      "Journal the why, not just the what.",
      "One percent improvements compound fast.",
      "When you win, stay humble.",
      "When you lose, stay logical.",
      "Trend or range — choose before you act.",
      "Wait for confirmation. Then commit.",
      "Trade the level, not the story.",
      "If you can’t hold it, don’t take it.",
      "Your system should feel boring.",
      "Don’t marry positions.",
      "Let winners work. Cut losers fast.",
      "You don’t need perfect — you need repeatable.",
      "The best traders say “no” most of the time.",
      "Respect liquidity. Respect timing.",
      "One clean session is enough.",
      "Focus on expectancy.",
      "Protect your account like it’s a business.",
      "Your habits are your strategy.",
      "Clarity is the currency of performance."
    ];

    function getDayStamp(d){
      const y = d.getFullYear();
      const m = String(d.getMonth() + 1).padStart(2, "0");
      const day = String(d.getDate()).padStart(2, "0");
      return `${y}-${m}-${day}`;
    }

    function setDailyLine(){
      const el = document.getElementById("dailyLine");
      if (!el) return;

      const stamp = getDayStamp(new Date());
      let sum = 0;
      for (let i = 0; i < stamp.length; i++) sum += stamp.charCodeAt(i) * (i + 1);

      const idx = sum % DAILY_LINES.length;
      el.innerHTML = `<span>Daily:</span> ${DAILY_LINES[idx] || "Stay sharp. Stay disciplined."}`;
    }

    // =============================================================================
    // MARKET HOURS (Real computation) + more “alive” UI (badge, dot, progress)
    // =============================================================================
    const SESSIONS = {
      London:   { tz: "Europe/London",      open: "08:00", close: "17:00" },
      NewYork:  { tz: "America/New_York",   open: "08:00", close: "17:00" },
      Sydney:   { tz: "Australia/Sydney",   open: "22:00", close: "07:00" },
      Asia:     { tz: "Asia/Tokyo",         open: "00:00", close: "09:00" }
    };

    function parseHHMM(s){
      const [hh, mm] = s.split(":").map(Number);
      return { hh, mm };
    }

    function zonedParts(date, timeZone){
      const fmt = new Intl.DateTimeFormat("en-US", {
        timeZone,
        year:"numeric", month:"2-digit", day:"2-digit",
        hour:"2-digit", minute:"2-digit", second:"2-digit",
        hour12:false
      });
      const parts = fmt.formatToParts(date);
      const map = {};
      for (const p of parts) map[p.type] = p.value;
      return {
        year: Number(map.year),
        month: Number(map.month),
        day: Number(map.day),
        hour: Number(map.hour),
        minute: Number(map.minute),
        second: Number(map.second)
      };
    }

    function makeZonedDateLike(dateNow, timeZone, hh, mm){
      const p = zonedParts(dateNow, timeZone);
      const approx = new Date(Date.UTC(p.year, p.month - 1, p.day, hh, mm, 0));
      const pp = zonedParts(approx, timeZone);

      const targetMinutes = hh * 60 + mm;
      const gotMinutes = pp.hour * 60 + pp.minute;

      const dayDiff =
        (pp.year - p.year) * 525600 +
        (pp.month - p.month) * 43200 +
        (pp.day - p.day) * 1440;

      const minuteDiff = (gotMinutes - targetMinutes) + dayDiff;
      return new Date(approx.getTime() - minuteDiff * 60 * 1000);
    }

    function formatDuration(ms){
      const s = Math.max(0, Math.floor(ms / 1000));
      const h = Math.floor(s / 3600);
      const m = Math.floor((s % 3600) / 60);
      if (h <= 0) return `${m}m`;
      return `${h}h ${m}m`;
    }

    function computeSession(cfg, now){
      const { tz, open, close } = cfg;
      const o = parseHHMM(open);
      const c = parseHHMM(close);

      const openToday = makeZonedDateLike(now, tz, o.hh, o.mm);
      let closeToday = makeZonedDateLike(now, tz, c.hh, c.mm);

      // overnight session if close <= open
      if (c.hh * 60 + c.mm <= o.hh * 60 + o.mm) {
        closeToday = new Date(closeToday.getTime() + 24 * 60 * 60 * 1000);
        if (now < openToday) {
          return {
            openAt: new Date(openToday.getTime() - 24 * 60 * 60 * 1000),
            closeAt: new Date(closeToday.getTime() - 24 * 60 * 60 * 1000)
          };
        }
      }
      return { openAt: openToday, closeAt: closeToday };
    }

    function setSessionUI(key, isOpen, badgeText, lineText, progressPct){
      const dot = document.getElementById(`dot${key}`);
      const badge = document.getElementById(`badge${key}`);
      const time = document.getElementById(`time${key}`);
      const fill = document.getElementById(`fill${key}`);
      const card = document.getElementById(`card${key}`);

      dot.classList.remove("open");
      badge.classList.remove("open");
      card.classList.remove("open");

      if (isOpen){
        dot.classList.add("open");
        badge.classList.add("open");
        card.classList.add("open");
      }

      badge.textContent = badgeText;
      time.textContent = lineText;
      fill.style.width = `${Math.max(0, Math.min(100, progressPct || 0))}%`;
    }

    function updateMarketHours(){
      const now = new Date();
      document.getElementById("mhUpdated").textContent =
        `Updated ${now.toLocaleTimeString([], { hour:"2-digit", minute:"2-digit" })}`;

      // Helper
      function updateOne(labelKey, cfg){
        const w = computeSession(cfg, now);
        const isOpen = (now >= w.openAt && now < w.closeAt);

        const total = (w.closeAt - w.openAt);
        const elapsed = Math.max(0, Math.min(total, now - w.openAt));
        const pct = total > 0 ? (elapsed / total) * 100 : 0;

        if (isOpen){
          setSessionUI(labelKey, true, "OPEN", `Closes in ${formatDuration(w.closeAt - now)}`, pct);
        } else {
          let nextOpen = w.openAt;
          if (now >= w.closeAt) nextOpen = new Date(w.openAt.getTime() + 24*60*60*1000);
          setSessionUI(labelKey, false, "CLOSED", `Opens in ${formatDuration(nextOpen - now)}`, 0);
        }
      }

      updateOne("London", SESSIONS.London);
      updateOne("NewYork", SESSIONS.NewYork);
      updateOne("Sydney", SESSIONS.Sydney);

      // Asia badge uses PRE-MARKET wording when closed (like your reference)
      (function updateAsia(){
        const cfg = SESSIONS.Asia;
        const w = computeSession(cfg, now);
        const isOpen = (now >= w.openAt && now < w.closeAt);
        const total = (w.closeAt - w.openAt);
        const elapsed = Math.max(0, Math.min(total, now - w.openAt));
        const pct = total > 0 ? (elapsed / total) * 100 : 0;

        if (isOpen){
          setSessionUI("Asia", true, "OPEN", `Closes in ${formatDuration(w.closeAt - now)}`, pct);
        } else {
          let nextOpen = w.openAt;
          if (now >= w.closeAt) nextOpen = new Date(w.openAt.getTime() + 24*60*60*1000);
          // show PRE-MARKET label
          const dot = document.getElementById("dotAsia");
          dot.classList.remove("open");
          document.getElementById("badgeAsia").classList.remove("open");
          document.getElementById("cardAsia").classList.remove("open");

          document.getElementById("badgeAsia").textContent = "PRE-MARKET";
          document.getElementById("timeAsia").textContent = `Opens in ${formatDuration(nextOpen - now)}`;
          document.getElementById("fillAsia").style.width = "0%";
        }
      })();
    }

    // =============================================================================
    // INIT + LIVE UPDATE
    // =============================================================================
    function initHome(){
      renderGreeting();
      setDailyLine();
      updateMarketHours();

      setInterval(() => {
        renderGreeting();
        updateMarketHours();
      }, 20 * 1000); // a bit faster = feels alive
    }

    initHome();
  </script>
</body>
</html>
