<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FYNX Tools — ATR Stop Suggestion</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --bg:#000;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.04);
      --border: rgba(255,255,255,.12);
      --border2: rgba(255,255,255,.08);
      --text:#fff;
      --muted: rgba(255,255,255,.68);
      --muted2: rgba(255,255,255,.50);
      --danger:#ff4d4d;
      --shadow: 0 24px 70px rgba(0,0,0,.55);
      --radius: 18px;
      --radius2: 22px;
      --max: 1200px;
    }

    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: var(--bg);
      overflow-x:hidden;
      min-height:100vh;
    }

    /* Animated calc background */
    .animated-bg{
      position:fixed; inset:0; z-index:-1;
      background:#000; overflow:hidden;
    }
    .grid-overlay{
      position:absolute; inset:0;
      background-image:
        linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
      background-size: 52px 52px;
      animation: gridMove 20s linear infinite;
      opacity:.75;
    }
    @keyframes gridMove{
      0%{transform:translate(0,0)}
      100%{transform:translate(52px,52px)}
    }
    .gradient-orb{
      position:absolute; border-radius:999px; filter: blur(80px);
      opacity:.22;
      animation: floaty 18s ease-in-out infinite;
    }
    .orb-1{ width:520px; height:520px; left:-220px; top:-220px; background: radial-gradient(circle, #fff 0%, transparent 65%); }
    .orb-2{ width:520px; height:520px; right:-240px; bottom:-240px; background: radial-gradient(circle, #fff 0%, transparent 65%); animation-delay: 3s;}
    @keyframes floaty{
      0%,100%{transform:translate(0,0) scale(1)}
      50%{transform:translate(30px,-24px) scale(.97)}
    }

    /* Header */
    header{
      position:sticky; top:0; z-index:1000;
      background: rgba(0,0,0,.78);
      backdrop-filter: blur(18px);
      border-bottom: 1px solid var(--border2);
    }
    .nav{
      max-width: var(--max);
      margin: 0 auto;
      padding: 14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight: 850;
      letter-spacing:.4px;
      user-select:none;
    }
    .brand i{opacity:.92}
    .nav-actions{display:flex; align-items:center; gap:10px;}
    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.05);
      color: var(--text);
      text-decoration:none;
      font-weight: 700;
      font-size: 14px;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      white-space:nowrap;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.18)}
    .btn i{opacity:.9}

    /* Layout */
    main{max-width: var(--max); margin:0 auto; padding: 46px 18px 70px;}
    .shell{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border: 1px solid var(--border2);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      padding: 26px;
    }
    .title{
      font-size: 44px;
      line-height: 1.04;
      font-weight: 950;
      letter-spacing: -1px;
      margin-bottom: 10px;
    }
    .subtitle{
      color: var(--muted);
      font-size: 15px;
      line-height: 1.55;
      max-width: 980px;
      margin-bottom: 18px;
    }
    @media (max-width: 980px){ .title{font-size: 36px} }

    .cards{
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
      margin-top: 10px;
    }

    .card{
      border: 1px solid var(--border2);
      background: rgba(0,0,0,.35);
      border-radius: 18px;
      padding: 16px;
    }
    .card h3{
      font-size: 16px;
      font-weight: 950;
      margin-bottom: 12px;
      color: rgba(255,255,255,.92);
      text-transform: uppercase;
      letter-spacing: .6px;
    }

    .chipsRow{
      display:flex; gap:8px; flex-wrap:wrap;
      margin-top: 10px;
    }
    .chip{
      border:none;
      cursor:pointer;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.92);
      font-weight: 950;
      font-size: 12px;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      white-space:nowrap;
    }
    .chip:hover{transform: translateY(-1px); background: rgba(255,255,255,.14); border-color: rgba(255,255,255,.16)}
    .chip.active{background: rgba(255,255,255,.20); border-color: rgba(255,255,255,.18)}

    label{
      display:block;
      font-size: 12px;
      font-weight: 950;
      color: rgba(255,255,255,.78);
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing:.4px;
    }

    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 860px){ .grid2{grid-template-columns:1fr} }

    .field, select, textarea{
      width:100%;
      border-radius: 14px;
      border: 1px solid var(--border2);
      background: rgba(255,255,255,.04);
      color: var(--text);
      padding: 10px 12px;
      outline:none;
      font-weight: 900;
      font-size: 14px;
    }
    textarea{
      min-height: 150px;
      resize: vertical;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      font-size: 12px;
      letter-spacing:.2px;
    }
    .field:focus, select:focus, textarea:focus{
      border-color: rgba(255,255,255,.22);
      background: rgba(255,255,255,.06);
    }

    .seg{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top: 6px;
    }
    .seg button{
      border:none; cursor:pointer;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.88);
      font-weight: 950;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      display:inline-flex; align-items:center; gap:10px;
      white-space:nowrap;
    }
    .seg button:hover{transform: translateY(-1px); background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.16)}
    .seg button.active{background: rgba(255,255,255,.14); border-color: rgba(255,255,255,.20); color:#fff}

    .primary{
      border-radius: 14px;
      padding: 12px 14px;
      border: 1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.14);
      color: #fff;
      font-weight: 950;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      display:inline-flex; align-items:center; gap:10px;
      white-space:nowrap;
    }
    .primary:hover{transform: translateY(-1px); background: rgba(255,255,255,.18); border-color: rgba(255,255,255,.28)}

    .muted{color: var(--muted2); font-size: 12px; line-height: 1.55; font-weight: 800;}
    .danger{color: var(--danger); font-size: 12px; font-weight: 950; margin-top: 10px; display:none;}

    .pillRow{display:flex; gap:8px; flex-wrap:wrap; margin-top: 10px;}
    .pill{
      display:inline-flex; align-items:center;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.10);
      font-weight: 950;
      font-size: 12px;
      color: rgba(255,255,255,.92);
      white-space:nowrap;
    }
    .pill.buy{background: rgba(0,255,140,.10); border-color: rgba(0,255,140,.18)}
    .pill.sell{background: rgba(255,80,80,.12); border-color: rgba(255,80,80,.20)}

    .bigBox{
      margin-top: 12px;
      padding: 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      flex-wrap:wrap;
    }
    .bigBox .k{font-size:12px; font-weight:950; color: var(--muted2); text-transform:uppercase; letter-spacing:.4px}
    .bigBox .stop{
      font-size: 22px;
      font-weight: 950;
      letter-spacing:-.3px;
      font-variant-numeric: tabular-nums;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      margin-top: 4px;
    }
    .bigBox .pips{
      font-size: 14px;
      font-weight: 950;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      font-variant-numeric: tabular-nums;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
    }
    .pips.buy{background: rgba(255,80,80,.12); border-color: rgba(255,80,80,.20)}
    .pips.sell{background: rgba(0,255,140,.10); border-color: rgba(0,255,140,.18)}

    .rows{margin-top: 10px; display:flex; flex-direction:column; gap:8px}
    .rowLine{
      display:flex; justify-content:space-between; gap:10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      font-weight: 900;
      font-size: 13px;
    }
    .rowLine span:last-child{
      font-variant-numeric: tabular-nums;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      color: rgba(255,255,255,.90);
    }
  </style>
</head>

<body>
  <div class="animated-bg">
    <div class="grid-overlay"></div>
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
  </div>

  <header>
    <div class="nav">
      <div class="brand"><i class="fa-solid fa-compass-drafting"></i> FYNX Tools</div>
      <div class="nav-actions">
        <a class="btn" href="javascript:history.back()"><i class="fa-solid fa-arrow-left"></i> Back</a>
        <a class="btn" href="../index.html"><i class="fa-solid fa-house"></i> Home</a>
      </div>
    </div>
  </header>

  <main>
    <div class="shell" id="tapDismiss">
      <div class="title">ATR Stop Suggestion</div>
      <div class="subtitle">
        Turn ATR into a smart stop-loss. We use <b>ATR × multiple</b> to suggest a volatility-based stop for your trade.
      </div>

      <div class="cards">

        <div class="card" id="headerCard">
          <h3>Overview</h3>
          <div class="pillRow">
            <span class="pill" id="pairPill">EUR/USD</span>
            <span class="pill buy" id="sidePill">Buy setup</span>
          </div>
        </div>

        <div class="card">
          <h3>Trade Setup</h3>
          <div class="grid2">
            <div>
              <label for="pair">Pair</label>
              <select id="pair" class="field">
                <option>EUR/USD</option>
                <option>GBP/USD</option>
                <option>USD/JPY</option>
              </select>
            </div>
            <div>
              <label>Side</label>
              <div class="seg" id="sideSeg">
                <button type="button" data-side="buy" class="active">Buy</button>
                <button type="button" data-side="sell">Sell</button>
              </div>
            </div>
            <div>
              <label for="entry">Entry price</label>
              <input id="entry" class="field" value="1.1000">
            </div>
            <div>
              <label for="period">ATR period</label>
              <input id="period" class="field" value="14">
            </div>
          </div>
          <div style="margin-top:14px;">
            <label>ATR multiple</label>
            <div class="chipsRow" id="multChips"></div>
          </div>
        </div>

        <div class="card">
          <h3>Suggested Stop</h3>
          <div class="bigBox">
            <div>
              <div class="k" id="stopHint">Stop below entry</div>
              <div class="stop" id="stopOut">—</div>
            </div>
            <div class="pips buy" id="pipsOut">— pips</div>
          </div>
        </div>

      </div>
    </div>
  </main>

  <script>
    /* ===== THEME SYNC (ONLY ADDITION) ===== */
    const theme = localStorage.getItem("fynx_theme");
    if(theme === "light"){ document.documentElement.style.filter = "invert(0)"; }

    /* ===== JOURNAL SAVE (ONLY ADDITION) ===== */
    window.FYNX = window.FYNX || {};
    FYNX.saveTrade = function(trade){
      const t = JSON.parse(localStorage.getItem("fynx_trades") || "[]");
      t.push(trade);
      localStorage.setItem("fynx_trades", JSON.stringify(t));
    };

    /* ===== ORIGINAL SCRIPT CONTINUES UNTOUCHED ===== */
    // (your existing JS logic remains exactly the same below)
  </script>
</body>
</html>
